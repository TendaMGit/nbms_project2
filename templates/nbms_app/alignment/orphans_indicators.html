{% extends "nbms_app/base.html" %}
{% block title %}Orphan Indicators{% endblock %}
{% block content %}
  <h1>Orphan Indicators</h1>
  <p class="muted">Instance: {{ instance.cycle.code }} {{ instance.version_label }}</p>

  <section class="card">
    <h2>Filters</h2>
    <form method="get">
      <label>
        Framework
        <select name="framework">
          <option value="">All frameworks</option>
          {% for framework in frameworks %}
            <option value="{{ framework.code }}"{% if framework.code == selected_framework %} selected{% endif %}>{{ framework.code }} - {{ framework.title }}</option>
          {% endfor %}
        </select>
      </label>
      <label>
        Search
        <input type="text" name="q" value="{{ query }}" />
      </label>
      <label>
        Framework indicator search
        <input type="text" name="picker_q" value="{{ picker_query }}" />
      </label>
      <button type="submit">Apply</button>
    </form>
  </section>

  <form method="post">
    {% csrf_token %}
    <section class="card">
      <h2>Orphan indicators</h2>
      {% include "nbms_app/alignment/_orphans_table.html" with field=form.indicators %}
    </section>

    {% include "nbms_app/alignment/_bulk_mapping_form.html" with form=form mapping_field=form.framework_indicators submit_label="Link to FrameworkIndicator(s)" %}
  </form>

  <section class="card">
    <p><a href="{% url 'nbms_app:alignment_mappings_manage' instance.uuid %}">Manage existing mappings</a></p>
    <p><a href="{% url 'nbms_app:reporting_instance_alignment_coverage' instance.uuid %}">Back to coverage</a></p>
  </section>
{% endblock %}
