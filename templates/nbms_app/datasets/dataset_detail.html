{% extends "nbms_app/base.html" %}
{% block title %}Dataset{% endblock %}
{% block content %}
  <h1>{{ dataset.title }}</h1>
  <div class="card">
    <p><strong>Status:</strong> {{ dataset.status }}</p>
    <p><strong>Sensitivity:</strong> {{ dataset.sensitivity }}</p>
    <p><strong>Description:</strong> {{ dataset.description|default:"-" }}</p>
    <p><strong>Methodology:</strong> {{ dataset.methodology|default:"-" }}</p>
    <p><strong>Source URL:</strong> {% if dataset.source_url %}<a href="{{ dataset.source_url }}">{{ dataset.source_url }}</a>{% else %}-{% endif %}</p>
    {% if can_edit %}
      <p><a href="{% url 'nbms_app:dataset_edit' dataset.uuid %}">Edit dataset</a></p>
    {% endif %}
  </div>
  <div class="card">
    <h2>Readiness</h2>
    {% if current_instance %}
      <p><strong>Current instance:</strong> {{ current_instance }}</p>
    {% else %}
      <p class="muted">Set a current reporting instance to see export readiness.</p>
    {% endif %}
    {% if readiness.blockers %}
      <p><strong>Blockers</strong></p>
      <ul>
        {% for item in readiness.blockers %}
          <li>{{ item.message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    {% if readiness.warnings %}
      <p><strong>Warnings</strong></p>
      <ul>
        {% for item in readiness.warnings %}
          <li>{{ item.message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
  <div class="card">
    <h2>Releases</h2>
    <ul>
      {% for release in releases %}
        <li>{{ release.version }} ({{ release.status }})</li>
      {% empty %}
        <li>No releases yet.</li>
      {% endfor %}
    </ul>
  </div>
  <p><a href="{% url 'nbms_app:dataset_list' %}">Back to list</a></p>
{% endblock %}
