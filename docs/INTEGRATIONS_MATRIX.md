# INTEGRATIONS_MATRIX

This matrix tracks concrete integrations represented in code. `_2bi` means planned next-step capability, not yet operational.

Alignment note:
- Integrations are scoped to ingestion, validation, publication, and reporting interoperability.
- NBMS does not replace contributor-owned indicator computation pipelines.

| Integration Point | implemented | _2bi (to be implemented) |
|---|---|---|
| CBD ORT NR7 structured export | `GET /exports/instances/<uuid>/ort-nr7-v2.json` via `src/nbms_app/exports/ort_nr7_v2.py` + contract validation in `src/nbms_app/services/export_contracts.py` | Direct ORT submission adapter and submission-status sync |
| CBD ORT narrative export | `GET /exports/instances/<uuid>/ort-nr7-narrative.json` via `src/nbms_app/exports/ort_nr7_narrative.py` | Narrative-to-structured reconciliation tooling |
| Multi-MEA template runtime | `ReportTemplatePack*` models (`src/nbms_app/models.py`), pack seeding (`seed_mea_template_packs`), API runtime handlers in `src/nbms_app/api_spa.py`; Ramsar COP14-oriented section schema + validation/PDF endpoints (`services/template_packs.py`) | Expand CITES/CMS from scaffold to full convention-specific question banks and contracts |
| GBF framework registry | `Framework`, `FrameworkGoal`, `FrameworkTarget`, `FrameworkIndicator` plus mapping tables in `src/nbms_app/models.py`; full COP16/31 catalog seeding command `seed_gbf_indicators` (headline + binary) | Additional factsheet-driven metadata enrichment for unresolved binary factsheet endpoints |
| SDG scaffold | SDG framework scaffold seeded in `seed_indicator_workflow_v1` | SDG-specific dashboard pack and reporting exports |
| Indicator workflow v1 pack | Four seeded indicators with methodologies, datasets, releases, series/datapoints, evidence, workflow state readiness in `seed_indicator_workflow_v1` | Expand from seed/demo values to production data feeds and per-indicator QA contracts |
| Indicator Method SDK | `IndicatorMethodProfile`, `IndicatorMethodRun`, SDK runner `src/nbms_app/services/indicator_method_sdk.py`, implementations for binary aggregation/CSV aggregation/spatial overlay, API run endpoint `/api/indicators/{uuid}/methods/{profile_uuid}/run` | Add API connector execution, scripted python/r-container execution, and long-running worker orchestration |
| Monitoring programme integration | Programme ops runtime now implemented with `MonitoringProgramme` operational fields, `MonitoringProgrammeSteward`, `MonitoringProgrammeRun`, `MonitoringProgrammeRunStep`, `MonitoringProgrammeAlert`; API endpoints under `/api/programmes*`; commands `seed_programme_ops_v1` and `run_monitoring_programmes` | Optional Celery worker profile and event-driven scheduling for high-frequency pipelines |
| BIRDIE external pipeline integration | Operational programme + executable connector module (`src/nbms_app/integrations/birdie/`), ingestion command (`seed_birdie_integration`), bronze/silver/gold lineage model (`IntegrationDataAsset`), BIRDIE dashboard API (`/api/integrations/birdie/dashboard`) | Live production credential wiring, pagination for high-volume endpoints, and model parity checks against upstream R pipelines |
| Ecosystem registry (VegMap + IUCN GET + RLE-ready) | Models: `EcosystemType`, `EcosystemTypologyCrosswalk`, `EcosystemRiskAssessment`, `IucnGetNode`; commands: `sync_vegmap_baseline`, `seed_get_reference`; APIs: `/api/registries/ecosystems*` | Complete reviewed VegMap to GET crosswalk curation for all production classes and full RLE criteria evidence packs |
| Taxon registry (Darwin Core-first + GBIF match + vouchers) | Models: `TaxonConcept`, `TaxonName`, `TaxonSourceRecord`, `SpecimenVoucher`; commands: `sync_taxon_backbone`, `sync_specimen_vouchers`; APIs: `/api/registries/taxa*` with sensitive locality masking | Live GBIF sync cadence controls, larger checklist imports, and occurrence-scale ingestion pipelines |
| IAS registry (GRIIS + EICAT/SEICAT) | Models: `AlienTaxonProfile`, `IASCountryChecklistRecord`, `EICATAssessment`, `SEICATAssessment`; command: `sync_griis_za`; APIs: `/api/registries/ias*` | Full assessor workflow UX, regulatory-list reconciliation, and country-regional federation |
| Registry lifecycle governance | Workflow service `src/nbms_app/services/registry_workflows.py` with evidence-gated transitions and audit events; APIs: `/api/registries/{object_type}/{object_uuid}/transition`, `/api/registries/{object_type}/{object_uuid}/evidence`; seed rules command `seed_registry_workflow_rules` | Configurable per-object approval chains and delegated reviewer assignment policies |
| Registry gold marts (dashboard/report outputs) | Derived summaries: `TaxonGoldSummary`, `EcosystemGoldSummary`, `IASGoldSummary`; refresh command `refresh_registry_marts`; API `/api/registries/gold` | Materialized-view optimization and scheduled refresh orchestration |
| Registry-derived indicator methods | Indicator Method SDK implementations: `ecosystem_registry_summary`, `ias_registry_pressure_index`, `taxon_registry_native_voucher_ratio`; seeded into GBF indicators by `seed_gbf_indicators` | Extend to additional GBF indicators and cross-cycle baseline comparisons |
| Programme template catalog (programme-driven architecture) | Model `ProgrammeTemplate`; command `seed_programme_templates`; API `/api/programmes/templates`; Angular page `/programmes/templates` | UI wizard for template-to-programme instantiation with custom step policies and approval chain presets |
| Indicator CSV exchange | `import_indicator_data` / `export_indicator_data` management commands | API-upload path and scheduled ingestion jobs |
| Dataset/reference catalog exchange | `reference_catalog_import` / `reference_catalog_export` commands | External API contracts with partner institutions |
| Spatial layer integration | Spatial registry models (`SpatialUnitType`, `SpatialUnit`, `SpatialLayer`, `SpatialFeature`, `SpatialIngestionRun`), seed command `seed_demo_spatial`, ingestion command/API (`ingest_spatial_layer`, `/api/spatial/layers/upload`), OGC API (`/api/ogc*`), vector tiles (`/api/tiles/*`) | Production layer scaling (partitioning/tile pre-generation), advanced OGC queryables |
| DFFE protected areas feed (SAPAD public release) | Default protected-area source in `sync_spatial_sources` (`NE_PROTECTED_LANDS_ZA`) using DFFE ArcGIS endpoint with checksum/provenance tracking and ArcGIS JSON to GeoJSON normalization before ingest | Formalize license statement extraction and add automated version metadata capture from service item |
| GeoServer interoperability | `seed_geoserver_layers` publishes NBMS-backed views into GeoServer workspace/datastore for WMS/WFS | Style automation (SLD lifecycle), GeoWebCache tuning, external catalogue sync |
| Angular primary UI integration | Angular app in `/frontend`, served via nginx container (`docker/frontend/nginx.conf`), backend API integration via `/api/*` | Full replacement of remaining Django form-heavy reporting pages |
| Demo identity + role-visibility operations | Commands `ensure_system_admin`, `seed_demo_users`, `list_demo_users`, `export_role_visibility_matrix`, `issue_e2e_sessions`; Playwright role matrix e2e in `frontend/e2e/smoke.spec.ts` enforces capability-driven visibility | Optional enterprise IdP/SSO adapters and non-demo credential bootstrap flows |
| SANBI organizational integration surface | SANBI org seeded in indicator workflow command and organization model usage across governance fields | Production SANBI system adapters and directory sync |
| DFFE organizational integration surface | DFFE org seeded in indicator workflow command and reporting ownership fields | Formal DFFE data exchange and review workflow integration |
| Stats SA integration | Not yet implemented in executable adapters | Stats SA dataset/profile adapters and QA mapping |
| SAEON integration | Not yet implemented in executable adapters | SAEON ingest connectors and provenance checks |
| DaRT-style enter-once/reuse-many | Reporting snapshots/export packages + reusable indicator metadata surfaces | Cross-cycle package manifests, workspace sync, and replay/export orchestration |
| One Biodiversity report publishing | Report product framework (`ReportProductTemplate`, `ReportProductRun`), APIs under `/api/report-products*`, seeded templates for NBA/GMO/Invasive | Rich citation engine, publication-grade layout controls, and editorial workflow states |
| Standards traceability (Darwin Core, GBIF taxonomy interpretation, VegMap, IUCN GET/RLE, EICAT/SEICAT, GRIIS) | Captured implementation mapping in `docs/external/registry_standards/*` and operational docs `docs/REGISTRIES_OVERVIEW.md`, `docs/CROSSWALK_EDITOR_RUNBOOK.md` | Add automated schema conformance checks against upstream vocab updates and scheduled compliance reports |
