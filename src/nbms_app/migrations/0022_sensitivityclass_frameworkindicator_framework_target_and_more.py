# Generated by Django 5.2.9 on 2026-01-23 07:38

import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('nbms_app', '0021_reviewdecision'),
    ]

    operations = [
        migrations.CreateModel(
            name='SensitivityClass',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('sensitivity_code', models.CharField(max_length=50, unique=True)),
                ('sensitivity_name', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('access_level_default', models.CharField(choices=[('public', 'Public'), ('internal', 'Internal'), ('restricted', 'Restricted')], default='internal', max_length=20)),
                ('consent_required_default', models.BooleanField(default=False)),
                ('redaction_policy', models.TextField(blank=True)),
                ('legal_basis', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.AddField(
            model_name='frameworkindicator',
            name='framework_target',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='framework_indicators', to='nbms_app.frameworktarget'),
        ),
        migrations.AddField(
            model_name='frameworkindicator',
            name='source_ref',
            field=models.CharField(blank=True, max_length=255),
        ),
        migrations.AddField(
            model_name='frameworkindicator',
            name='source_system',
            field=models.CharField(blank=True, max_length=100),
        ),
        migrations.AddField(
            model_name='frameworktarget',
            name='official_text',
            field=models.TextField(blank=True),
        ),
        migrations.AddField(
            model_name='frameworktarget',
            name='source_ref',
            field=models.CharField(blank=True, max_length=255),
        ),
        migrations.AddField(
            model_name='frameworktarget',
            name='source_system',
            field=models.CharField(blank=True, max_length=100),
        ),
        migrations.AddField(
            model_name='organisation',
            name='alternative_contact_email',
            field=models.EmailField(blank=True, max_length=254),
        ),
        migrations.AddField(
            model_name='organisation',
            name='alternative_contact_name',
            field=models.CharField(blank=True, max_length=255),
        ),
        migrations.AddField(
            model_name='organisation',
            name='notes',
            field=models.TextField(blank=True),
        ),
        migrations.AddField(
            model_name='organisation',
            name='org_code',
            field=models.CharField(blank=True, max_length=50, null=True, unique=True),
        ),
        migrations.AddField(
            model_name='organisation',
            name='parent_org',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='child_organisations', to='nbms_app.organisation'),
        ),
        migrations.AddField(
            model_name='organisation',
            name='primary_contact_email',
            field=models.EmailField(blank=True, max_length=254),
        ),
        migrations.AddField(
            model_name='organisation',
            name='primary_contact_name',
            field=models.CharField(blank=True, max_length=255),
        ),
        migrations.AddField(
            model_name='organisation',
            name='source_ref',
            field=models.CharField(blank=True, max_length=255),
        ),
        migrations.AddField(
            model_name='organisation',
            name='source_system',
            field=models.CharField(blank=True, max_length=100),
        ),
        migrations.AddField(
            model_name='organisation',
            name='website_url',
            field=models.URLField(blank=True),
        ),
        migrations.CreateModel(
            name='DataAgreement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('agreement_code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('agreement_type', models.CharField(blank=True, choices=[('MOU', 'MOU'), ('data_sharing', 'Data sharing'), ('SLA', 'SLA'), ('licence', 'Licence'), ('custom', 'Custom')], max_length=50)),
                ('status', models.CharField(blank=True, max_length=50)),
                ('start_date', models.DateField(blank=True, null=True)),
                ('end_date', models.DateField(blank=True, null=True)),
                ('licence', models.CharField(blank=True, max_length=100)),
                ('restrictions_summary', models.TextField(blank=True)),
                ('benefit_sharing_terms', models.TextField(blank=True)),
                ('citation_requirement', models.TextField(blank=True)),
                ('document_url', models.URLField(blank=True)),
                ('primary_contact_name', models.CharField(blank=True, max_length=255)),
                ('primary_contact_email', models.EmailField(blank=True, max_length=254)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('parties', models.ManyToManyField(blank=True, related_name='data_agreements', to='nbms_app.organisation')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='DatasetCatalog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('dataset_code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('dataset_type', models.CharField(blank=True, max_length=100)),
                ('licence', models.CharField(blank=True, max_length=100)),
                ('access_level', models.CharField(choices=[('public', 'Public'), ('internal', 'Internal'), ('restricted', 'Restricted')], default='internal', max_length=20)),
                ('consent_required', models.BooleanField(default=False)),
                ('temporal_start', models.DateField(blank=True, null=True)),
                ('temporal_end', models.DateField(blank=True, null=True)),
                ('update_frequency', models.CharField(blank=True, choices=[('annual', 'Annual'), ('quarterly', 'Quarterly'), ('monthly', 'Monthly'), ('ad_hoc', 'Ad hoc'), ('continuous', 'Continuous')], max_length=20)),
                ('spatial_coverage_description', models.TextField(blank=True)),
                ('spatial_resolution', models.CharField(blank=True, max_length=100)),
                ('taxonomy_standard', models.CharField(blank=True, max_length=255)),
                ('ecosystem_classification', models.CharField(blank=True, max_length=255)),
                ('doi_or_identifier', models.CharField(blank=True, max_length=255)),
                ('landing_page_url', models.URLField(blank=True)),
                ('api_endpoint_url', models.URLField(blank=True)),
                ('file_formats', models.CharField(blank=True, max_length=255)),
                ('qa_status', models.CharField(blank=True, choices=[('draft', 'Draft'), ('rejected', 'Rejected'), ('validated', 'Validated'), ('published', 'Published'), ('deprecated', 'Deprecated')], max_length=20)),
                ('citation', models.TextField(blank=True)),
                ('keywords', models.CharField(blank=True, max_length=255)),
                ('last_updated_date', models.DateField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('agreement', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dataset_catalogs', to='nbms_app.dataagreement')),
                ('custodian_org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='catalog_datasets_custodian', to='nbms_app.organisation')),
                ('producer_org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='catalog_datasets_producer', to='nbms_app.organisation')),
                ('sensitivity_class', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dataset_catalogs', to='nbms_app.sensitivityclass')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='FrameworkGoal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('code', models.CharField(max_length=50)),
                ('title', models.CharField(max_length=255)),
                ('official_text', models.TextField(blank=True)),
                ('description', models.TextField(blank=True)),
                ('sort_order', models.PositiveIntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('framework', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='goals', to='nbms_app.framework')),
            ],
            options={
                'ordering': ['framework__code', 'sort_order', 'code'],
            },
        ),
        migrations.AddField(
            model_name='frameworktarget',
            name='goal',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='targets', to='nbms_app.frameworkgoal'),
        ),
        migrations.CreateModel(
            name='Methodology',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('methodology_code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('scope', models.CharField(blank=True, max_length=255)),
                ('references_url', models.URLField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('owner_org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='methodologies', to='nbms_app.organisation')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='MethodologyDatasetLink',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('relationship_type', models.CharField(blank=True, choices=[('lead', 'Lead'), ('partner', 'Partner'), ('supporting', 'Supporting'), ('contextual', 'Contextual'), ('derived', 'Derived')], max_length=20)),
                ('role', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('dataset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='methodology_links', to='nbms_app.datasetcatalog')),
                ('methodology', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dataset_links', to='nbms_app.methodology')),
            ],
        ),
        migrations.CreateModel(
            name='MethodologyIndicatorLink',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('relationship_type', models.CharField(blank=True, choices=[('lead', 'Lead'), ('partner', 'Partner'), ('supporting', 'Supporting'), ('contextual', 'Contextual'), ('derived', 'Derived')], max_length=20)),
                ('role', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('indicator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='methodology_links', to='nbms_app.indicator')),
                ('methodology', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='indicator_links', to='nbms_app.methodology')),
            ],
        ),
        migrations.CreateModel(
            name='MethodologyVersion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('version', models.CharField(max_length=50)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('active', 'Active'), ('deprecated', 'Deprecated')], default='draft', max_length=20)),
                ('effective_date', models.DateField(blank=True, null=True)),
                ('deprecated_date', models.DateField(blank=True, null=True)),
                ('change_log', models.TextField(blank=True)),
                ('protocol_url', models.URLField(blank=True)),
                ('computational_script_url', models.URLField(blank=True)),
                ('parameters_json', models.JSONField(blank=True, default=dict)),
                ('qa_steps_summary', models.TextField(blank=True)),
                ('peer_reviewed', models.BooleanField(default=False)),
                ('approval_body', models.CharField(blank=True, max_length=255)),
                ('approval_reference', models.CharField(blank=True, max_length=255)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('methodology', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='versions', to='nbms_app.methodology')),
            ],
        ),
        migrations.CreateModel(
            name='MonitoringProgramme',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('programme_code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('programme_type', models.CharField(blank=True, choices=[('national', 'National'), ('provincial', 'Provincial'), ('district_municipality', 'District municipality'), ('local_municipality', 'Local municipality'), ('biome', 'Biome'), ('vegetation_type', 'Vegetation type'), ('site', 'Site'), ('project', 'Project')], max_length=50)),
                ('start_year', models.PositiveIntegerField(blank=True, null=True)),
                ('end_year', models.PositiveIntegerField(blank=True, null=True)),
                ('geographic_scope', models.CharField(blank=True, max_length=255)),
                ('spatial_coverage_description', models.TextField(blank=True)),
                ('taxonomic_scope', models.CharField(blank=True, max_length=255)),
                ('ecosystem_scope', models.CharField(blank=True, max_length=255)),
                ('objectives', models.TextField(blank=True)),
                ('sampling_design_summary', models.TextField(blank=True)),
                ('update_frequency', models.CharField(blank=True, choices=[('annual', 'Annual'), ('quarterly', 'Quarterly'), ('monthly', 'Monthly'), ('ad_hoc', 'Ad hoc'), ('continuous', 'Continuous')], max_length=20)),
                ('qa_process_summary', models.TextField(blank=True)),
                ('consent_required', models.BooleanField(default=False)),
                ('website_url', models.URLField(blank=True)),
                ('primary_contact_name', models.CharField(blank=True, max_length=255)),
                ('primary_contact_email', models.EmailField(blank=True, max_length=254)),
                ('alternative_contact_name', models.CharField(blank=True, max_length=255)),
                ('alternative_contact_email', models.EmailField(blank=True, max_length=254)),
                ('notes', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('agreement', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='monitoring_programmes', to='nbms_app.dataagreement')),
                ('lead_org', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lead_monitoring_programmes', to='nbms_app.organisation')),
                ('partners', models.ManyToManyField(blank=True, related_name='partner_monitoring_programmes', to='nbms_app.organisation')),
                ('sensitivity_class', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='monitoring_programmes', to='nbms_app.sensitivityclass')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ProgrammeDatasetLink',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('relationship_type', models.CharField(blank=True, choices=[('lead', 'Lead'), ('partner', 'Partner'), ('supporting', 'Supporting'), ('contextual', 'Contextual'), ('derived', 'Derived')], max_length=20)),
                ('role', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('dataset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='programme_links', to='nbms_app.datasetcatalog')),
                ('programme', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dataset_links', to='nbms_app.monitoringprogramme')),
            ],
        ),
        migrations.CreateModel(
            name='ProgrammeIndicatorLink',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('relationship_type', models.CharField(blank=True, choices=[('lead', 'Lead'), ('partner', 'Partner'), ('supporting', 'Supporting'), ('contextual', 'Contextual'), ('derived', 'Derived')], max_length=20)),
                ('role', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('source_system', models.CharField(blank=True, max_length=100)),
                ('source_ref', models.CharField(blank=True, max_length=255)),
                ('indicator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='programme_links', to='nbms_app.indicator')),
                ('programme', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='indicator_links', to='nbms_app.monitoringprogramme')),
            ],
        ),
        migrations.AddConstraint(
            model_name='frameworkgoal',
            constraint=models.UniqueConstraint(fields=('framework', 'code'), name='uq_framework_goal'),
        ),
        migrations.AddConstraint(
            model_name='methodologydatasetlink',
            constraint=models.UniqueConstraint(fields=('methodology', 'dataset'), name='uq_methodology_dataset'),
        ),
        migrations.AddConstraint(
            model_name='methodologyindicatorlink',
            constraint=models.UniqueConstraint(fields=('methodology', 'indicator'), name='uq_methodology_indicator'),
        ),
        migrations.AddConstraint(
            model_name='methodologyversion',
            constraint=models.UniqueConstraint(fields=('methodology', 'version'), name='uq_methodology_version'),
        ),
        migrations.AddConstraint(
            model_name='programmedatasetlink',
            constraint=models.UniqueConstraint(fields=('programme', 'dataset'), name='uq_programme_dataset'),
        ),
        migrations.AddConstraint(
            model_name='programmeindicatorlink',
            constraint=models.UniqueConstraint(fields=('programme', 'indicator'), name='uq_programme_indicator'),
        ),
    ]
